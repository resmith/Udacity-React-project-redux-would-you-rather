<html>

<head>
  <meta charset="UTF-8" />
  <title>Check Project Specs</title>
  <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
  <script>


  var openFile = function(event) {
    var input = event.target;
    console.log(input);
    console.log(input.files[0]);

    var reader = new FileReader();
    reader.onload = function(){
      let incompleteText = ''
      let completedText = ''

    // By lines
    let incompleteTaskCount = 0;
    let completedTaskCount = 0;
    var lines = reader.result.split('\n');
    for(var line = 0; line < lines.length; line++){
      if (lines[line].includes('[x]')) {
        completedText +=  lines[line] + '<br />'
        completedTaskCount += 1
      } else if (lines[line].includes('[ ]')) {
        incompleteText +=  lines[line] + '<br />'
        incompleteTaskCount += 1
      } else {
        completedText +=  lines[line] + '<br />'
        incompleteText +=  lines[line] + '<br />'
      }
    }

    const nodeIncompletedTask = document.getElementById('incompleteTask');
    const nodeIncompleteTaskCount = document.getElementById('incompleteTaskCount');

    const nodeCompletedTask = document.getElementById('completedTask');
    const nodecompletedTaskCount = document.getElementById('completedTaskCount');

    nodeIncompletedTask.innerHTML = incompleteText;
    nodeIncompleteTaskCount.innerHTML = incompleteTaskCount;
    nodeCompletedTask.innerHTML = completedText;
    nodecompletedTaskCount.innerHTML = completedTaskCount;
    };

    reader.readAsText(input.files[0]);
  };
  </script>
</head>

<body>
  <h1>Check Project Spec</h2>
  <p>Check the project specs for completed and uncompleted tasks</p>

  <input type='file' accept='.md' onchange='openFile(event, "output2")'><br>

  <h2> Summary </h2>
  Incomplete Task:<span id='incompleteTaskCount'> ... </span>
  Completed Task:<span id='completedTaskCount'> ... </span>


  <h2> Uncompleted Tasks </h2>
  <div id='incompleteTask'> ... </div>

  <h2> Completed Tasks </h2>
  <div id='completedTask'> ... </div>
</body>

</html>

<!--  Inspiration from https://stackoverflow.com/questions/14446447/how-to-read-a-local-text-file -->
